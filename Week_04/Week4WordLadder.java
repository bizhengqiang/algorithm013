package leetcode.editor.cn;
//[127]:å•è¯æ¥é¾™
//ç»™å®šä¸¤ä¸ªå•è¯ï¼ˆbeginWord å’Œ endWordï¼‰å’Œä¸€ä¸ªå­—å…¸ï¼Œæ‰¾åˆ°ä» beginWord åˆ° endWord çš„æœ€çŸ­è½¬æ¢åºåˆ—çš„é•¿åº¦ã€‚è½¬æ¢éœ€éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š
// 
//
// 
// æ¯æ¬¡è½¬æ¢åªèƒ½æ”¹å˜ä¸€ä¸ªå­—æ¯ã€‚ 
// è½¬æ¢è¿‡ç¨‹ä¸­çš„ä¸­é—´å•è¯å¿…é¡»æ˜¯å­—å…¸ä¸­çš„å•è¯ã€‚ 
// 
//
// è¯´æ˜: 
//
// 
// å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„è½¬æ¢åºåˆ—ï¼Œè¿”å› 0ã€‚ 
// æ‰€æœ‰å•è¯å…·æœ‰ç›¸åŒçš„é•¿åº¦ã€‚ 
// æ‰€æœ‰å•è¯åªç”±å°å†™å­—æ¯ç»„æˆã€‚ 
// å­—å…¸ä¸­ä¸å­˜åœ¨é‡å¤çš„å•è¯ã€‚ 
// ä½ å¯ä»¥å‡è®¾ beginWord å’Œ endWord æ˜¯éç©ºçš„ï¼Œä¸”äºŒè€…ä¸ç›¸åŒã€‚ 
// 
//
// ç¤ºä¾‹ 1: 
//
// è¾“å…¥:
//beginWord = "hit",
//endWord = "cog",
//wordList = ["hot","dot","dog","lot","log","cog"]
//
//è¾“å‡º: 5
//
//è§£é‡Š: ä¸€ä¸ªæœ€çŸ­è½¬æ¢åºåˆ—æ˜¯ "hit" -> "hot" -> "dot" -> "dog" -> "cog",
//     è¿”å›å®ƒçš„é•¿åº¦ 5ã€‚
// 
//
// ç¤ºä¾‹ 2: 
//
// è¾“å…¥:
//beginWord = "hit"
//endWord = "cog"
//wordList = ["hot","dot","dog","lot","log"]
//
//è¾“å‡º:Â 0
//
//è§£é‡Š:Â endWord "cog" ä¸åœ¨å­—å…¸ä¸­ï¼Œæ‰€ä»¥æ— æ³•è¿›è¡Œè½¬æ¢ã€‚ 
// Related Topics å¹¿åº¦ä¼˜å…ˆæœç´¢ 
// ğŸ‘ 409 ğŸ‘ 0

import javafx.util.Pair;

import java.util.*;

public class Week4WordLadder{
    public static void main(String... args){
    
    }
}
//leetcode submit region begin(Prohibit modification and deletion)
class WordLadderSolution {

    /**
     * æœ€é‡è¦çš„æ­¥éª¤æ˜¯æ‰¾å‡ºåªå·®ä¸€ä¸ªå­—æ¯çš„å¤šä¸ªå•è¯ï¼Œå³ä»å½“å‰å•è¯ä¸€æ­¥èƒ½å¾—åˆ°å“ªäº›å•è¯ã€‚
     * ä¸ºäº†å¿«é€Ÿçš„æ‰¾åˆ°è¿™äº›ç›¸é‚»èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯¹ç»™å®šçš„ wordList åšä¸€ä¸ªé¢„å¤„ç†ï¼Œå°†å•è¯ä¸­çš„æŸä¸ªå­—æ¯ç”¨ * ä»£æ›¿
     * è¿™ä¸ªé¢„å¤„ç†å¸®æˆ‘ä»¬æ„é€ äº†ä¸€ä¸ªå•è¯å˜æ¢çš„é€šç”¨çŠ¶æ€ã€‚
     *
     * æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªMapæ¥å­˜å‚¨ï¼Œé”®ï¼šé€šç”¨çŠ¶æ€ï¼›å€¼ï¼šèƒ½å¾—åˆ°è¿™ä¸ªé€šç”¨çŠ¶æ€çš„æ‰€æœ‰å•è¯
     * ä¾‹å¦‚ï¼šDog ----> D*g <---- Digï¼ŒDog å’Œ Dig éƒ½æŒ‡å‘äº†ä¸€ä¸ªé€šç”¨çŠ¶æ€ D*gã€‚å³é”®D*gå¯¹åº”çš„å€¼ä¸º[Dog,Dig]
     *
     * è¿™æ­¥é¢„å¤„ç†æ‰¾å‡ºäº†å•è¯è¡¨ä¸­æ‰€æœ‰å•è¯æ”¹å˜æŸä¸ªå­—æ¯åçš„é€šç”¨çŠ¶æ€ï¼Œå¹¶å¸®åŠ©æˆ‘ä»¬æ›´æ–¹ä¾¿ä¹Ÿæ›´å¿«çš„æ‰¾åˆ°ç›¸é‚»èŠ‚ç‚¹ã€‚
     * å¦åˆ™ï¼Œå¯¹äºæ¯ä¸ªå•è¯æˆ‘ä»¬éœ€è¦éå†æ•´ä¸ªå­—æ¯è¡¨æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå•è¯ä¸å®ƒç›¸å·®ä¸€ä¸ªå­—æ¯ï¼Œè¿™å°†èŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚
     * é¢„å¤„ç†æ“ä½œåœ¨å¹¿åº¦ä¼˜å…ˆæœç´¢ä¹‹å‰é«˜æ•ˆçš„å»ºç«‹äº†é‚»æ¥è¡¨ã€‚
     *
     * ä¾‹å¦‚ï¼Œåœ¨å¹¿æœæ—¶æˆ‘ä»¬éœ€è¦è®¿é—® Dug çš„æ‰€æœ‰é‚»æ¥ç‚¹ï¼Œä¹Ÿå°±æ˜¯æƒ³çŸ¥é“ç”±Dugèƒ½å˜æ¢åˆ°å­—å…¸ä¸­å“ªäº›å•è¯
     * æˆ‘ä»¬å¯ä»¥å…ˆç”Ÿæˆ Dug çš„æ‰€æœ‰é€šç”¨çŠ¶æ€ï¼šä»¥é€šç”¨çŠ¶æ€ä¸ºé”®å»è·å–å€¼å°±å¯å¾—åˆ°ç»“æœ
     * Dug => *ug
     * Dug => D*g
     * Dug => Du*
     * ç¬¬äºŒä¸ªå˜æ¢ D*g å¯ä»¥åŒæ—¶æ˜ å°„åˆ° Dog æˆ–è€… Digï¼Œå› ä¸ºä»–ä»¬éƒ½æœ‰ç›¸åŒçš„é€šç”¨çŠ¶æ€ã€‚æ‹¥æœ‰ç›¸åŒçš„é€šç”¨çŠ¶æ€æ„å‘³ç€ä¸¤ä¸ªå•è¯åªç›¸å·®ä¸€ä¸ªå­—æ¯ï¼Œä»–ä»¬çš„èŠ‚ç‚¹æ˜¯ç›¸è¿çš„ã€‚
     *
     */

    /**
     * å¹¿åº¦ä¼˜å…ˆéå†(å¯è®¤ä¸ºæ˜¯å¯»æ‰¾å…¨å±€æœ€ä¼˜è§£)
     * 1. å¯¹ç»™å®šçš„ wordList åšé¢„å¤„ç†ï¼Œæ‰¾å‡ºæ‰€æœ‰çš„é€šç”¨çŠ¶æ€ã€‚å°†é€šç”¨çŠ¶æ€è®°å½•åœ¨å­—å…¸ä¸­ï¼Œé”®æ˜¯é€šç”¨çŠ¶æ€ï¼Œå€¼æ˜¯æ‰€æœ‰å…·æœ‰é€šç”¨çŠ¶æ€çš„å•è¯ã€‚
     * 2. å°†é”®å€¼å¯¹ <beginWordï¼Œ1> æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œ1 ä»£è¡¨èŠ‚ç‚¹çš„å±‚æ¬¡ã€‚æˆ‘ä»¬éœ€è¦è¿”å› endWord çš„å±‚æ¬¡ä¹Ÿå°±æ˜¯ä» beginWord å‡ºå‘çš„æœ€çŸ­è·ç¦»ã€‚
     * 3. ä¸ºäº†é˜²æ­¢å‡ºç°ç¯ï¼Œä½¿ç”¨è®¿é—®æ•°ç»„è®°å½•å½“å‰å•è¯å·²è®¿é—®è¿‡ã€‚
     * 4. å½“é˜Ÿåˆ—ä¸­æœ‰å…ƒç´ çš„æ—¶å€™ï¼Œå–å‡ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè®°ä¸º current_wordã€‚
     * 5. æ‰¾åˆ° current_word çš„æ‰€æœ‰é€šç”¨çŠ¶æ€ï¼Œå¹¶æ ¹æ®è¿™äº›é€šç”¨çŠ¶æ€å¾—åˆ°å…¶å¯¹åº”çš„å•è¯åˆ—è¡¨w1ï¼Œw2ï¼Œå³ä»currWordèƒ½è¾¾åˆ°ç»™å®šå­—å…¸ä¸­çš„listä¸­çš„w1å’Œw2
     * 6. w1å’Œw2éƒ½å’Œ current_word ç›¸è¿ï¼Œå› æ­¤å°†ä»–ä»¬åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚
     * 7. å¯¹äºæ–°è·å¾—çš„æ‰€æœ‰å•è¯ï¼Œå‘é˜Ÿåˆ—ä¸­åŠ å…¥å…ƒç´  (word, level + 1) å…¶ä¸­ level æ˜¯ current_word çš„å±‚æ¬¡ã€‚
     * 8. æœ€ç»ˆå½“ä½ åˆ°è¾¾æœŸæœ›çš„å•è¯ï¼Œå¯¹åº”çš„å±‚æ¬¡å°±æ˜¯æœ€çŸ­å˜æ¢åºåˆ—çš„é•¿åº¦
     * ç›¸å½“äºè¦ä»1å¾—åˆ°9ï¼Œå‘ç°1ç›´æ¥åˆ°è¾¾2å’Œ3ï¼Œå†æ“ä½œ2å¾—åˆ°4å’Œ5ï¼Œå†æ“ä½œ3å¾—åˆ°6å’Œ7ï¼Œå†æ“ä½œ4å¾—åˆ°8å’Œ9ï¼Œè¾¾åˆ°ç›®æ ‡
     * ä¹Ÿå°±æ˜¯ä¸€ä¸ªå¹¿åº¦ä¼˜å…ˆéå†ï¼Œå› æ­¤éœ€è¦å€ŸåŠ© [é˜Ÿåˆ—] ï¼Œä¸”è¦é¿å…é‡å¤éå†
     */
    /**
    *@Date 2020/8/23
    *@Description è§£é‡Šå¦‚ä¸Š
    *@Param
    *@Return
    **/
    public static int ladderLength(String beginWord, String endWord, List<String> wordList) {
        // ç»™å®šå•è¯åˆ—è¡¨ä¸­ä¸åŒ…æ‹¬endwordï¼Œç›´æ¥è¿”å›
        if (!wordList.contains(endWord)) return 0;
        // é¢˜ç›®è¯´æ˜ï¼Œæ¯ä¸ªå•è¯é•¿åº¦ç›¸åŒ
        int len = beginWord.length();
        // å¤„ç†ç»™å‡ºçš„å•è¯å­—å…¸ï¼Œè½¬æ¢ä¸ºå…¨éƒ¨çš„é€šç”¨çŠ¶æ€åŠæ¯ä¸ªé€šé…è¯æ˜ å°„çš„å•è¯é›†åˆ
        HashMap<String, ArrayList<String>> allComboDict = new HashMap<>();
        // lambdaè¡¨è¾¾å¼éå†ï¼ŒcurrWordæ˜¯å½“å‰æ­£åœ¨éå†çš„å•è¯
        wordList.forEach(curWord -> {
            // æ¯ä¸ªå•è¯èƒ½å¾—åˆ°lenç§é€šé…è¯(æ¯ä¸ªä½ç½®å­—ç¬¦éƒ½å¯å˜ä¸º*)
            for (int i = 0; i < len; i++) {
                // å¾—åˆ°é€šé…è¯
                String comboWord = curWord.substring(0, i) + "*" + curWord.substring(i + 1, len);
                // ä»é€šé…å­—å…¸å…¨é›†ä¸­æ‹¿åˆ°è¿™ä¸ªé€šé…è¯å¯¹åº”çš„å•è¯é›†åˆï¼Œå¦‚æœæ˜¯ç©º(ç¬¬ä¸€æ¬¡å¾—åˆ°é€šé…è¯æ—¶)å°±åˆ›å»ºä¸€ä¸ªæ–°çš„
                ArrayList<String> comboWordList = allComboDict.getOrDefault(comboWord, new ArrayList<>());
                // æŠŠå½“å‰è¿™ä¸ªå•è¯åŠ è¿›å»ï¼Œå› æ­¤ä»è¿™ä¸ªå•è¯å¾—åˆ°äº†è¿™ä¸ªé€šé…è¯
                comboWordList.add(curWord);
                // æ›´æ–°ä¸€ä¸ªé€šé…å­—å…¸å…¨é›†ä¸­è¿™ä¸ªé€šé…è¯å¯¹åº”çš„å•è¯é›†åˆ
                allComboDict.put(comboWord, comboWordList);
            }
        });
        // å¹¿åº¦ä¼˜å…ˆéå†é˜Ÿåˆ—
        // LinkedList implements Deque extends Queue
        Queue<Pair<String, Integer>> queue = new LinkedList<>();
        // è®°å½•å·²éå†è¿‡çš„å•è¯,ä¸ºä»€ä¹ˆä¸ç”¨Listï¼Œå› ä¸ºä¹‹ååˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦å·²éå†è¿‡æ—¶ï¼ŒArrayListçš„containsæ–¹æ³•å¤ªä½æ•ˆäº†ï¼Œå®ƒçš„åº•å±‚æ˜¯æ•°ç»„ï¼Œæˆ–è€…ç›´æ¥ç”¨TreeSetä¹Ÿå¯ä»¥
        // ArrayList<String> hasVistedList = new ArrayList<>();
        HashMap<String, Boolean> hasVistedList = new HashMap<>();
        // å¼€å§‹è¯ä½œä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—,æ·±åº¦levelæ˜¯1ï¼Œæ ‡è®°å…¶å·²è®¿é—®
        queue.add(new Pair<>(beginWord, 1));
        // hasVistedList.add(beginWord);
        hasVistedList.put(beginWord, true);
        // å¹¿åº¦ä¼˜å…ˆéå†ï¼Œé€ä¸ªå–å‡ºé˜Ÿåˆ—ä¸­å…ƒç´ è¿›è¡Œæ“ä½œ
        while (!queue.isEmpty()) {
            // é˜Ÿåˆ—ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
            Pair<String, Integer> node = queue.remove();
            // å½“å‰èŠ‚ç‚¹å¯¹åº”çš„<å•è¯ï¼Œå±‚çº§>
            String currWord = node.getKey();
            int level = node.getValue();
            for (int i = 0; i < len; i++) {
                // ä»å½“å‰å•è¯ï¼Œå¾—åˆ°lenä¸ªé€šé…è¯
                String currComboWord = currWord.substring(0, i) + "*" + currWord.substring(i + 1, len);
                // æ‹¿åˆ°è¿™ä¸ªé€šé…è¯æ˜ å°„çš„å•è¯é›†åˆ(ä¹Ÿå°±æ˜¯ä»å½“å‰å•è¯ä¸€æ¬¡è½¬æ¢èƒ½å¾—åˆ°å“ªäº›å•è¯)
                ArrayList<String> currComboWordList = allComboDict.getOrDefault(currComboWord, new ArrayList<>());
                // éå†å…¶ä¸­æ˜¯å¦åŒ…å«ç›®æ ‡å•è¯
                for (String word : currComboWordList) {
                    // åŒ…å«ç›®æ ‡å•è¯ï¼Œè¯´æ˜å½“å‰å•è¯èƒ½ä¸€æ¬¡è½¬æ¢åˆ°ç›®æ ‡å•è¯ï¼Œç»å†çš„æ­¥éª¤æ•°æ˜¯å½“å‰å•è¯çš„å±‚çº§ + 1
                    if (word.equals(endWord))
                        return level + 1;
                    // å¦åˆ™ï¼Œå½“å‰å•è¯èƒ½å¾—åˆ°è¿™ä¸ªå•è¯ï¼Œå¦‚æœå®ƒè¿˜æ²¡è¢«è®¿é—®è¿‡
                    // if (!hasVistedList.contains(word)){
                    // HashMap.containsKeyæ–¹æ³•æ•ˆç‡è¿œé«˜äºArrayList.contains
                    if (!hasVistedList.containsKey(word)){
                        // æŠŠè¿™ä¸ªå•è¯åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­
                        queue.add(new Pair<>(word, level + 1));
                        // æ ‡è®°å®ƒä¸ºå·²è®¿é—®
                        // hasVistedList.add(word);
                        hasVistedList.put(word, true);
                    }
                }
            }
        }
        return 0;
    }
}
//leetcode submit region end(Prohibit modification and deletion)
